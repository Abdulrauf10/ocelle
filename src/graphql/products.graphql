fragment ProductType on ProductType {
  id
  name
  slug
  isShippingRequired
  isDigital
}

fragment ProductVariant on ProductVariant {
  id
  name
  sku
  quantityAvailable
  pricing {
    price {
      gross {
        currency
        amount
      }
    }
  }
}

fragment Product on Product {
  id
  name
  slug
  description
  seoTitle
  seoDescription
  thumbnail(size: 1024, format: WEBP) {
    url
    alt
  }
  category {
    id
    name
  }
  variants {
    ...ProductVariant
  }
  pricing {
    priceRange {
      start {
        gross {
          amount
          currency
        }
      }
      stop {
        gross {
          amount
          currency
        }
      }
    }
  }
}

query FindProductTypes($keyword: String!) {
  productTypes(filter: { search: $keyword }, first: 10) {
    edges {
      node {
        ...ProductType
      }
    }
  }
}

mutation CreateProductType($name: String!) {
  productTypeCreate(input: { name: $name }) {
    errors {
      code
      message
    }
    productType {
      ...ProductType
    }
  }
}

query FindProductCategory($slug: String!) {
  category(slug: $slug) {
    id
  }
}

mutation CreateProductCategory($name: String!, $slug: String!) {
  categoryCreate(input: { name: $name, slug: $slug }) {
    errors {
      code
      message
    }
    category {
      id
    }
  }
}

query FindProduct($slug: String!) {
  product(slug: $slug) {
    ...Product
  }
}

mutation CreateProduct(
  $name: String!
  $description: JSONString
  $slug: String!
  $productType: ID!
  $category: ID
  $channelListings: [ProductChannelListingCreateInput!]!
  $variants: [ProductVariantBulkCreateInput!]
) {
  productBulkCreate(
    products: {
      name: $name
      description: $description
      slug: $slug
      category: $category
      productType: $productType
      channelListings: $channelListings
      variants: $variants
    }
  ) {
    errors {
      code
      message
    }
    results {
      product {
        ...Product
      }
    }
  }
}

mutation UpdateProductChannelListing($productId: ID!, $channels: [ProductChannelListingAddInput!]) {
  productChannelListingUpdate(id: $productId, input: { updateChannels: $channels }) {
    errors {
      code
      message
    }
  }
}

mutation CreateProductVariants($productId: ID!, $variants: [ProductVariantBulkCreateInput!]!) {
  productVariantBulkCreate(product: $productId, variants: $variants) {
    errors {
      code
      message
    }
  }
}
